<!DOCTYPE html>
<meta charset="utf-8">
<script type="text/javascript" src="d3.v5.min.js"></script>
<style>

path.line
{
    fill: none;
    stroke: #000;
}

pre {
    font-family: Arial, sans-serif;
    font-size: 12px;
}

.tg  {border-collapse:collapse;border-color:#bbb;border-spacing:0;}
.tg td{background-color:#E0FFEB;border-color:#bbb;border-style:solid;border-width:1px;color:#594F4F;
  font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;word-break:normal;}
.tg th{background-color:#9DE0AD;border-color:#bbb;border-style:solid;border-width:1px;color:#493F3F;
  font-family:Arial, sans-serif;font-size:14px;font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
.tg .tg-0lax{text-align:center;vertical-align:top}
.tg .tg-sjuo{background-color:#C2FFD6;text-align:center;vertical-align:top}
</style>
<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"><head>
<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Editor msdt:dt="string">Hull, Matthew D</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Editor>
<mso:xd_Signature msdt:dt="string"></mso:xd_Signature>
<mso:Order msdt:dt="string">35500.0000000000</mso:Order>
<mso:ComplianceAssetId msdt:dt="string"></mso:ComplianceAssetId>
<mso:TemplateUrl msdt:dt="string"></mso:TemplateUrl>
<mso:xd_ProgID msdt:dt="string"></mso:xd_ProgID>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Author msdt:dt="string">Hull, Matthew D</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Author>
<mso:ContentTypeId msdt:dt="string">0x010100D48F87729E805A4096AD64C4E51DACBE</mso:ContentTypeId>
<mso:_SourceUrl msdt:dt="string"></mso:_SourceUrl>
<mso:_SharedFileIndex msdt:dt="string"></mso:_SharedFileIndex>
</mso:CustomDocumentProperties>
</xml><![endif]-->
<title></title></head><body>
    <table class="tg" width="100%" >
        <thead>
          <tr>
            <th class="tg-0lax"></th>
            <th class="tg-0lax">Reddit Sentiment</th>
            <th class="tg-0lax">Number of Reddit Posts</th>
            <th class="tg-0lax">Twitter Sentiment</th>
            <th class="tg-0lax">Number of Tweets</th>
            <th class="tg-0lax">Tweet Activity (Retweets and Likes)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="tg-0lax">Week 1</td>
            <td class="tg-0lax">
                <input id="one_red_sent" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>Negative             Positive</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="one_red" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Posts             Many Posts</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="one_tw_sent" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>Negative            Positive</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="one_tw" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Tweets             Many Tweets</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="one_tw_ac" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Activity            Alot of Activity</pre></label>
            </td>
          </tr>
          <tr>
            <td class="tg-sjuo">Week 2</td>
            <td class="tg-sjuo">
                <input id="two_red_sent" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>Negative              Positive</pre></label>
            </td>
            <td class="tg-sjuo">
                <input id="two_red" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Posts              Many Posts</pre></label>
            </td>
            <td class="tg-sjuo">
                <input id="two_tw_sent" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>Negative             Positive</pre></label>
            </td>
            <td class="tg-sjuo">
                <input id="two_tw" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Tweets              Many Tweets</pre></label>
            </td>
            <td class="tg-sjuo">
                <input id="two_tw_ac" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Activity             Alot of Activity</pre></label>
            </td>
          </tr>
          <tr>
            <td class="tg-0lax">Week 3</td>
            <td class="tg-0lax">
                <input id="three_red_sent"type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>Negative              Positive</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="three_red" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Posts              Many Posts</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="three_tw_sent" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>Negative             Positive</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="three_tw" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Tweets              Many Tweets</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="three_tw_ac" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Activity             Alot of Activity</pre></label>
            </td>
          </tr>
          <tr>
            <td class="tg-sjuo">Week 4</td>
            <td class="tg-sjuo">
                <input id="four_red_sent" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>Negative              Positive</pre></label>
            </td>
            <td class="tg-sjuo">
                <input id="four_red" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Posts              Many Posts</pre></label>
            </td>
            <td class="tg-sjuo">
                <input id="four_tw_sent" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>Negative             Positive</pre></label>
            </td>
            <td class="tg-sjuo">
                <input id="four_tw" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Tweets              Many Tweets</pre></label>
            </td>
            <td class="tg-sjuo">
                <input id="four_tw_ac" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Activity             Alot of Activity</pre></label>
            </td>
          </tr>
          <tr>
            <td class="tg-0lax">Week 5</td>
            <td class="tg-0lax">
                <input id="five_red_sent" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>Negative              Positive</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="five_red" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Posts              Many Posts</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="five_tw_sent" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>Negative             Positive</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="five_tw" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Tweets              Many Tweets</pre></label>
            </td>
            <td class="tg-0lax">
                <input id="five_tw_ac" type="range" list="sentiments" min="0" max="100" list="steplist">
                <label><pre>No Activity             Alot of Activity</pre></label>
            </td>
          </tr>
        </tbody>
        </table>
        <p>Please select which company and window size you want to predict the next month for:</p>
        <select id="select">
            <option value="Microsoft">Microsoft</option>
            <option value="Apple">Apple</option>
            <option value="Amazon">Amazon</option>
            <option value="Tesla">Tesla</option>
            <option value="Google">Google</option>
        </select>
        <select id="select2">
            <option value="30">30</option>
            <option value="60">60</option>
            <option value="90">90</option>
        </select>
        <button id="submit" type="button">Submit</button>

<script>
let parseDate = d3.timeParse('%m/%d/%Y')
var timeFormat = d3.timeFormat("%d %b %y")
d3.dsv(",", "combined1.csv", function(d) {
    return {
      date    : parseDate(d.Date),
      price   : +d.Close,
	  score: +d.positive_twitter,
      high : +d.High,
	  comp : d.company,
      volume : +d.volume,
	  lk:d.like_num_twitter
    }
}).then(function(data) {
    d3.select("#submit").on("click", () => {
        let xhr = new XMLHttpRequest();
        const url='http://localhost:5000/'
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        console.log(d3.select("#one_red_sent")["_groups"][0][0].value / 100)
        let weekData = [
            ["Week", "Reddit Sentiment", "Number of Reddit Posts", "Twitter Sentiment", "Number of Tweets", "Tweet Activity"],
            ["1", d3.select("#one_red_sent")["_groups"][0][0].value / 100, d3.select("#one_red")["_groups"][0][0].value / 100, d3.select("#one_tw_sent")["_groups"][0][0].value / 100, d3.select("#one_tw")["_groups"][0][0].value / 100, d3.select("#one_tw_ac")["_groups"][0][0].value / 100],
            ["2", d3.select("#two_red_sent")["_groups"][0][0].value / 100, d3.select("#two_red")["_groups"][0][0].value / 100, d3.select("#two_tw_sent")["_groups"][0][0].value / 100, d3.select("#two_tw")["_groups"][0][0].value / 100, d3.select("#two_tw_ac")["_groups"][0][0].value / 100],
            ["3", d3.select("#three_red_sent")["_groups"][0][0].value / 100, d3.select("#three_red")["_groups"][0][0].value / 100, d3.select("#three_tw_sent")["_groups"][0][0].value / 100, d3.select("#three_tw")["_groups"][0][0].value / 100, d3.select("#three_tw_ac")["_groups"][0][0].value / 100],
            ["4", d3.select("#four_red_sent")["_groups"][0][0].value / 100, d3.select("#four_red")["_groups"][0][0].value / 100, d3.select("#four_tw_sent")["_groups"][0][0].value / 100, d3.select("#four_tw")["_groups"][0][0].value / 100, d3.select("#four_tw_ac")["_groups"][0][0].value / 100],
            ["5", d3.select("#five_red_sent")["_groups"][0][0].value / 100, d3.select("#five_red")["_groups"][0][0].value / 100, d3.select("#five_tw_sent")["_groups"][0][0].value / 100, d3.select("#five_tw")["_groups"][0][0].value / 100, d3.select("#five_tw_ac")["_groups"][0][0].value / 100]
        ]
        let data = JSON.stringify({"company": d3.select("#select")["_groups"][0][0].value, "window": d3.select("#select2")["_groups"][0][0].value,"data": weekData})
        xhr.send(data);
        xhr.onreadystatechange = (e) => {
            console.log(e)
            console.log(xhr.responseText)
        }
    })
    
    // var margin = {top: 50, right: 400, bottom: 50, left: 75}
    // var width = window.innerWidth - margin.left - margin.right - 200
    // var height = window.innerHeight - margin.top - margin.bottom - 20

    // let startingData = []
    // let maxPrice = 0
    // for (let i = 0; i < data.length; i++) {
    //     if (data[i].comp === "Microsoft") {
    //         if (data[i].price > maxPrice) {
    //             maxPrice = data[i].price
    //         }
    //         startingData.push(data[i])
    //     }
        
    // }
    // var n = startingData.length
    // console.log(startingData)

    // var xScale = d3.scaleTime()
    //     .domain([startingData[0].date, startingData[n-1].date]) 
    //     .range([0, width])
        
    // var yScale = d3.scaleLinear()
    //     .domain([0, maxPrice]) 
    //     .range([height, 0]);

    // var line = d3.line()
    //     .x(function(d) { return xScale(d.date);  })
    //     .y(function(d) { return yScale(d.price); }) 

    // var svg = d3.select("body").append("svg")
    //     .attr("width", width + margin.left + margin.right)
    //     .attr("height", height + margin.top + margin.bottom)
    // .append("g")
    //     .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  
    // svg.append("g")
    //     .attr("class", "x axis")
    //     .attr("transform", "translate(0," + height + ")")
    //     .call(
    //         d3.axisBottom(xScale)
    //         .tickFormat(timeFormat)
    //     );

    // svg.append("text") 
    //     .attr("transform", "translate(500," + (height + 38) + ")")
    //     .text("Date")

    // svg.append("g") 
    //     .attr("class", "y axis")
    //     .call(d3.axisLeft(yScale));

    // svg.append("text") 
    //     .attr("transform", "rotate(-90)")
    //     .attr("y", -50)
    //     .attr("x", -300)
    //     .text("Stock Price in Dollars")

    // svg.append("path")
    //     .datum(startingData)
    //     .attr("class", "line")
    //     .attr("d", line)
  
}).catch(function(error) {
  console.log(error);
});

</script>
</body>
</html>
